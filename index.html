<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Nova Reserva — Calculadora (v2)</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="container">
    <h1 class="header-corp">Nova Reserva — Calculo de Margem</h1>
    <p class="small-muted"></p>

    <!-- Dados da Reserva -->
    <div class="section-title">Dados da Reserva</div>
    <div class="card shadow-sm p-2">
      <div class="row g-1 align-items-center">

        <div class="col-12 col-md-4">
          <div class="field-label">Empresa</div>
        </div>
        <div class="col-12 col-md-8">
          <select id="empresa" class="form-select">
            <option value="">Selecione uma empresa</option>
            <option value="brasif">Brasif</option>
            <option value="maxum">Maxum</option>
          </select>
        </div>

        <div class="col-12 col-md-4">
          <div class="field-label">Filial</div>
        </div>
        <div class="col-12 col-md-8">
          <select id="filial" class="form-select">
            <option value="">Selecione uma empresa primeiro</option>
          </select>
        </div>

        <div class="col-12 col-md-4"><div class="field-label">Nome do Vendedor</div></div>
        <div class="col-12 col-md-8"><input id="NomeVendedor" class="form-control" type="text" placeholder="Nome do Vendedor"></div>
      </div>
    </div>

    <!-- Dados da Venda -->
    <div class="section-title">Dados da Venda</div>
    <div class="card shadow-sm p-2">
      <div class="row g-1 align-items-center">

        <div class="col-12 col-md-4">
          <div class="field-label">Tipo de Venda</div>
        </div>
        <div class="col-12 col-md-8">
          <select id="TipoVenda" class="form-select">
            <option value="VendaFinanciada">Venda Financiada</option>
            <option value="VendaVista">Venda à Vista</option>
            <option value="VendaPublica">Venda Órgão Público</option>
            <option value="Consorcio">Consórcio</option>
            <option value="CartaoBNDES">Cartão BNDES</option>
            <option value="Car">Car</option>
            <option value="ADefinir">A definir</option>
          </select>
        </div>

        <div class="col-12 col-md-4"><div class="field-label">Modalidade de Financiamento</div></div>
        <div class="col-12 col-md-8"><input id="Modalidade" class="form-control" type="text"></div>

        <div class="col-12 col-md-4"><div class="field-label">Banco do Financiamento</div></div>
        <div class="col-12 col-md-8"><input id="Banco" class="form-control" type="text"></div>

        <div class="col-12 col-md-4"><div class="field-label">Possui AF</div></div>
        <div class="col-12 col-md-8"><input id="AF" class="form-control" type="text"></div>

        <div class="col-12 col-md-4"><div class="field-label">Previsão de entrega</div></div>
        <div class="col-12 col-md-8"><input id="dataEntrega" class="form-control datefield" type="date"></div>

        <div class="col-12 col-md-4"><div class="field-label">Nome do contato no banco</div></div>
        <div class="col-12 col-md-8"><input id="ContatoBanco" class="form-control" type="text"></div>

        <div class="col-12 col-md-4"><div class="field-label">Telefone do banco</div></div>
        <div class="col-12 col-md-8"><input id="clienteTel" class="form-control mask-phone" type="tel" maxlength="15" placeholder="(00) 00000-0000"></div>
      </div>
    </div>

    <!-- Detalhamento da máquina -->
    <div class="section-title">Dados da máquina</div>
    <div class="card shadow-sm p-2">
      <div class="row g-2 align-items-center mb-2">
        <div class="col-12 col-md-4"><div class="field-label">Data da Reserva</div></div>
        <div class="col-12 col-md-8"><input id="dataReserva" class="form-control datefield" type="date"></div>

        <!-- Cabeçalho fixo (9 colunas iguais) -->
        <div class="maquinas-header mt-3">
          <div class="col-header">Marca</div>
          <div class="col-header">Tipo</div>
          <div class="col-header">Modelo</div>
          <div class="col-header">Código</div>
          <div class="col-header">Valor Venda (Cada)</div>
          <div class="col-header">Quantidade</div>
          <div class="col-header">Agrega / Desagrega</div>
          <div class="col-header">Valor de compra</div>
          <div class="col-header">Remover</div>
        </div>
        <!-- Corpo das máquinas (gerado dinamicamente pelo JS) -->
        <div id="maquinasList"></div>
        <div class="text-center my-2">
          <button id="btnAddMaquina" class="btn btn-success btn-sm">Adicionar máquina</button>
        </div>
      </div>
    </div>

    <!-- Detalhamento de Parcelas -->
    <div class="section-title">Detalhamento de Parcelas</div>
    <div class="card shadow-sm p-2">
      <div class="row g-2 align-items-center mb-2">
        <!-- Campo de quantidade -->
        <div class="col-12 col-md-4">
          <div class="field-label">Quantidade de Parcelas</div>
        </div>
        <div class="col-12 col-md-8">
          <input id="qtdParcelas" class="form-control numeric" data-type="int" inputmode="numeric" min="1" placeholder="Ex: 6">
        </div>
        <!-- Taxa -->
         <div class="col-12 col-md-4">
          <div class="field-label">Taxa de Juros Wholesale (a.m.)</div>
        </div>
        <div class="col-12 col-md-8">
          <input id="Juros_taxa" class="form-control numeric" data-type="percent" inputmode="decimal" min="0" placeholder="Ex: 1.75">
        </div>
        <!-- Cabeçalho fixo (8 colunas iguais) --> 
         <div class="parcelas-header mt-3"> 
          <div class="col-header">Parcela</div>
          <div class="col-header">Valor da parcela</div>
          <div class="col-header">% da Parcela</div>
          <div class="col-header">Dias</div>
          <div class="col-header">Valor restante</div>
          <div class="col-header">% de perda</div>
          <div class="col-header">VPL</div>
          <div class="col-header">Juros</div>
        </div>
        <!-- Corpo das parcelas (gerado dinamicamente pelo JS) -->
         <div id="parcelasList"></div>
        </div>
      </div>
      <!-- RESUMO DAS PARCELAS (coloque após #parcelasList) -->
       <div id="parcelasResumo" class="mt-3 card shadow-sm p-3">
        <div class="section-title">Resumo Financeiro</div>
        <div class="row mt-2">
          <div class="col-12 col-md-4">
            <div class="field-label">Valor Total</div>
            <input id="resumo_valor_total" class="form-control" readonly>
          </div>
          <div class="col-12 col-md-4">
            <div class="field-label">VPL Total</div>
            <input id="resumo_vpl_total" class="form-control" readonly>
          </div>
          <div class="col-12 col-md-4">
            <div class="field-label">Juros Total</div>
            <input id="resumo_juros_total" class="form-control" readonly>
          </div>
        </div>
      </div>
      <div class="mt-3 text-end">
        <button id="resetBtn" class="btn btn-outline-secondary">Resetar</button>
      </div>
    </div>
    <!-- Carrega apenas o módulo principal -->
     <script type="module" src="js/index.js"></script>
    </body>
</html>

